---
- name: local Ubuntu configuration
  hosts: all
  roles:
    - name: developer
    - name: workstation_common
  tasks:
    - name: Install general tooling
      become: yes
      apt:
        state: present
        name:
          - foomatic-db
          - foomatic-db-compressed-ppds
          - exfat-fuse
          - tig
          - htop
          - gparted
          - jq

    - name: Create service to manage turbo boost
      become: yes
      template:
        src: disable-turbo-boost.service
        dest: /etc/systemd/system/disable-turbo-boost.service

    - name: Ensure turbo boost is disabled
      become: yes
      systemd:
        name: disable-turbo-boost
        state: started
        enabled: yes
